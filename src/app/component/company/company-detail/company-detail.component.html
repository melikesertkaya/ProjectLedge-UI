<div *ngIf="company" class="company-details">
  <button class="btnSantiye" (click)="showSiteForm()">Şantiye Ekle</button>

  <a class="button-back" (click)="goBack()">Geri</a>
  
  <h2>Şirket Detayı: {{ company.name }}</h2>
  <div class="company-info">
    <div class="info-item">
      <strong>Adres:</strong> {{ company.address }}
    </div>
    <div class="info-item">
      <strong>Telefon No:</strong> {{ company.phoneNumber }}
    </div>
    <div class="info-item">
      <strong>Vergi No:</strong> {{ company.taxNumber }}
    </div>
    <div class="info-item">
      <strong>Şirket Kodu:</strong> {{ company.companyCode }}
    </div>
    <div class="info-item">
      <strong>Açıklama:</strong> {{ company.description }}
    </div>
    <div class="info-item">
      <strong>KDV Türü:</strong> {{ company.getKdvTypeString() }}
    </div>
    <div class="info-item">
      <strong>Fiş/Fatura No:</strong> {{ company.billNumber }}
    </div>
    <div class="info-item">
      <strong>Cari Türü:</strong> {{ company.getCurrentAccountTypeString() }}
    </div>
  </div>

  <div *ngIf="isSiteFormVisible" class="site-form-wrapper">
    <h3>Yeni Şantiye Ekle</h3>
    <form [formGroup]="siteForm" (ngSubmit)="addSite()" class="site-form"> 
      <div class="form-group">
        <label for="siteName">Şantiye Adı</label>
        <input formControlName="siteName" id="siteName" class="form-control" required>
      </div>
      <div class="form-group">
        <label for="siteCode">Şantiye Kodu</label>
        <input formControlName="siteCode" id="siteCode" class="form-control" required>
      </div>
      <div class="form-buttons">
        <button type="submit" class="btn btn-success" [disabled]="siteForm.invalid">Ekle</button>
        <button type="button" class="btn btn-secondary ml-2" (click)="hideSiteForm()">Geri</button>
      </div>
    </form>
  </div>
</div>

<div *ngIf="currentAmountResponseModel.length > 0" class="currentAmount">
  <h2>Şantiyeler</h2>
  <div class="sites-container">
    <div *ngFor="let site of currentAmountResponseModel" class="site-card">
      <strong>Şantiye Adı:</strong> {{ site.constructionSiteName }}<br>
      <strong>Şantiye Kodu:</strong> {{ site.constructionSiteNo }}<br>
      <strong>Türü:</strong> {{ site.getCurrentAccountTypeString() }}<br>
      <strong>Toplam Tutar:</strong> {{ site.totalAmount | currency }}<br>
    </div>
  </div>
</div>
